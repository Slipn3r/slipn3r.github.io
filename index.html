<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" 
      href="https://cdn.jsdelivr.net/gh/spiermar/d3-flame-graph@1.0.4/dist/d3.flameGraph.min.css" 
      integrity="sha256-w762vSe6WGrkVZ7gEOpnn2Y+FSmAGlX77jYj7nhuCyY=" 
      crossorigin="anonymous" 
    />
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      async function get(id) {
        axios.get(`https://habr.com/ru/post/${id}/`, {mode: 'no-cors'})
        .then(function (response) {
          if ( response.data.indexOf('<ul class="content-list content-list_comments" id="comments-list">') && response.data.indexOf('<div class="js-form_placeholder">')) {
            const begin = response.data.indexOf('<ul class="content-list content-list_comments" id="comments-list">');
            const end = response.data.indexOf('<div class="js-form_placeholder">');

            const commentsHTML = response.data.slice(begin, end).trim().split('<li class="content-list__item content-list__item_comment js-comment');
            const nOfComments = commentsHTML.length - 1;
            console.log(nOfComments);

            let parser = new DOMParser().parseFromString(response.data, 'text/html');

            let data = {
              children: []
            };
            commentsHTML.forEach(c => {
              let id = c
              let parentId = 0
            });
          }
        })
        .catch(function (error) {
          console.log(error.message);
        })
      }

      //get(537606); //349
      get(537994); //3
      //get(537202); //0
    </script>
  </body>
</html>
